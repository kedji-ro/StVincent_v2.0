<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<title>Admin Login Page | St. Vincent Strambi C.P of Home for the Aged</title>
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
	<meta name="description" content="Admin Login Page | St. Vincent Strambi C.P of Home for the Aged"> 
	<link rel="stylesheet" type="text/css" href="../old-folders/assets/css/main.css">
    <!-- Font Awesome -->  
    <link rel="stylesheet" type="text/css" href="../old-folders/assets/vendor/font-awesome-4.7.0/css/font-awesome.min.css" >
    <!-- Pagination -->   
    <link rel="stylesheet" type="text/css" href="../old-folders/assets/css/jquery.bdt.css" >
    <link rel="stylesheet" type="text/css" href="../old-folders/assets/css/jquery.gritter.min.css"> 
    <link rel="stylesheet" type="text/css" href="../old-folders/assets/css/custom.css">  
</head>

<body> 
	<div class="login-wrapper">

		<div class="left-block animatedParent animateOnce" data-sequence='200'>
			<header class="login-header">
				<a href="login.html" title="St. Vincent Strambi C.P of Home for the Aged" aria-label="Logo" class="horizontal-logo">  
                    <h5 class="text-white text-uppercase">Admin Login Page</h5>
				</a>
			</header>

			<h5 class="text-white text-uppercase pb-4 mb-1 animated fadeInUpShort" data-id='1'>Insert Credential</h5>

			<div id="login_status" class="alert alert-danger alert-dismissible fade show" role="alert" style="display: none;">
				<img src="../old-folders/assets/images/alert-danger.svg" alt=""> Wrong Username or Password!
				<button type="button" class="btn-close btn-icon btn" data-dismiss="alert" aria-label="Close">
					<img src="../old-folders/assets/images/alert-close.svg" alt="">
				</button>
			</div>

			<div class="form-group animated fadeInUpShort " data-id='2'>
				<input id="username" type="text" class="filled-form-control light-control" placeholder="Username" />
			</div>

			<div class="form-group animated fadeInUpShort " data-id='3'>
				<input id="password" type="password" class="filled-form-control light-control" placeholder="Password" />
			</div> 

			<div class="d-flex align-items-center justify-content-between mb-md-5 animated fadeInUpShort" data-id='4'> 
				<button onclick="btn_adminlogin()" title="Login" class="btn btn-white" type="submit">Log In</button> 
			</div> 

		</div> 
		<footer class="login-footer ">
			<p class="copyright">&copy; 2022 | St. Vincent Strambi C.P of Home for the Aged.
                <br>All rights reserved.</p>
		</footer>  
	</div> 
   
    <script type="text/javascript" src="../old-folders/assets/js/jquery.js"></script> 
    <script type="text/javascript" src="../old-folders/assets/js/bootstrap.bundle.min.js"></script>
    <script type="text/javascript" src="../old-folders/assets/js/jquery.nicescroll.min.js"></script>
    <script type="text/javascript" src="../old-folders/assets/js/bootstrap-select.min.js"></script>
    <script type="text/javascript" src="../old-folders/assets/js/jquery.jscrollpane.min.js"></script>
    <script type="text/javascript" src="../old-folders/assets/js/jquery.mousewheel.js"></script>
    <script type="text/javascript" src="../old-folders/assets/js/css3-animate-it.js"></script>
    <!-- Popper -->
    <script type="text/javascript" src="../old-folders/assets/js/jquery.gritter.min.js"></script> 
    <script type="text/javascript" src="../old-folders/assets/js/popper.min.js"></script>
    <script type="text/javascript" src="../old-folders/assets/js/buttons.js"></script>
    <!-- Pagination --> 
    <script type="text/javascript" src="../old-folders/assets/js/jquery.sortelements.js"></script>
    <script type="text/javascript" src="../old-folders/assets/js/jquery.bdt.min.js"></script> 
    <script type="text/javascript" src="../old-folders/assets/js/custom.js"></script>  

	<script>
		$(document).keyup(function (event) {
			if ($("#username").is(":focus") && event.key == "Enter") {
				btn_adminlogin();
			}
			if ($("#password").is(":focus") && event.key == "Enter") {
				btn_adminlogin();
			}
		});

        function btn_adminlogin(){ 
            var username = document.getElementById("username").value.trim();
            var password = document.getElementById("password").value.trim(); 

            if (username.length > 0 && password.length > 0) {
                document.getElementById("username").style.borderColor = "";
                document.getElementById("password").style.borderColor = "";
                execute_adminLogin(username, password);  
            }
            else{
                document.getElementById("username").style.borderColor = (username.length < 1)? "#e45454" : "";
                document.getElementById("password").style.borderColor = (password.length < 1)? "#e45454" : "";
            } 
        }

        function execute_adminLogin(username, password){ 
                fetch('../old-folders/includes/execute.php', {
                    method: 'POST',
                    headers: {
                        'Content-Type':'application/x-www-form-urlencoded'
                    },
                    body: 'data=admin_login'
                    + '&uname=' + username  
                    + '&pass=' + password 
                }).then(function (response) {
                    return response.json();
                }).then(function (data) { 
                    // console.log(data) 
                    if (data.status == 1){   
                        document.getElementById("username").value = '';
                        document.getElementById("password").value = '';
                        window.location.href = 'index.php?patient';
                    }
                    else{
                        getToast_admin("warning", "Invalid Account!", "Username or Password is Incorrect.");  
                        document.getElementById("password").value = '';
                    }
                })["catch"](function (error) {
                    console.log(error);  
                    getToast_admin("danger", "Internal Error!", "Cannot Connect to Server.");  
                });   
            }
	</script>
</body>
</html>